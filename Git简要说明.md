# Git简介

<!--TOC-->

Git是分布式版本控制系统，它就没有中央服务器的，每个人有一个完整的版本库，这样，工作的时候就不需要联网了，既然每个人的电脑都有一个完整的版本库，那多个人如何协作呢？比如说自己在电脑上改了文件A，其他人也在电脑上改了文件A，这时，你们两之间只需把各自的修改推送给对方，就可以互相看到对方的修改了。

## 1.1 Git的组成

Git是分布式版本控制。分布式版本控制系统没有中央服务器，每个人都有一个完整的版本库，通过各自的修改推送给对方，使得可以多个人协作。

简洁的图形教程：[git 简明指南](https://www.runoob.com/manual/git-guide/)

git的底层实现：[图解Git](https://marklodato.github.io/visual-git-guide/index-zh-cn.html#commit)

git数据库其实是简单的“键值对（key-value）”数据库。向该数据库中插入任意类型的内容，它都会返回一个键值。通过返回的键值可以在任意时刻再次检索该内容。

Git用于版本控制可解决以下关键问题：

1、辅助合并代码，并灵活切换各个历史版本；

2、区分代码提交人、比较任意两个版本差异；

3、多人协作开发；

Git分为工作区Workspace、暂存区Index、本地仓库Repository、远程仓库Remote。

工作区 —— 就是电脑文件系统上的项目文件所处的环境，这是最接近用户的区域，所有 **新增的改动** 都是先从工作区开始。

暂存区 —— 这是个暂时存放文件改动的区域，可进入本地仓库，也可返回到工作区

本地仓库 —— 能进到本地仓库的文件改动都已经有对应的 commit object，因此有迹可循，这是三个区中**最安全**的区域。所以尽量把有价值的文件改动 commit 进来，避免无意中丢失，再采用其他方法整理好代码push到远端仓库。

1. 对文件修改时（增删改），文件的改动发生在 **工作区Workspace**
2. 执行 git add 时，对应的文件改动就会被送到 **暂存区Index**
3. 执行 git commit 时，对应的文件改动才会进入本地仓库Repository，并且使当前的分支向前长了一个 commit object

另外在远程和本地仓库之间还有/refs/remote，是远程仓库的一个只读引用，不可修改。

### git常用命令解析

```c
pull（拉取）:获取远程仓库中的代码更新，并且合并到本地仓库中(pull=fetch+merge)

fetch（获取）:获取远程仓库的代码更新（remote->/refs/remote）

merge（合并）：将获取到的远程更新合并到本地仓库(/refs/remote->Repository)

commit:（提交）：将更新的代码提交到本地仓库

push:（推送）：将更新的代码推送到远程仓库

commit and push：（提交且推送）：将更新的代码提交到本地仓库后推送到远程仓库----常用

diff:（比较差异）：比较本地的最近一次受版本控制（提交或拉取后）的文件与该文件修改后的
差异----常用

diff with previous version：（与上一版本比较差异）比较本地的上一次受版本控制的
（上一次提交或拉取）文件与该文件修改后的差异

show log：（显示日志）：显示远程仓库所有开发提交记录日志（要看最新的首先拉取）----常用

show Reflog:（显示引用日志）：显示自己本地仓库的所有操作（从克隆开始，克隆、拉取、提交）

check for modifications：（检查已修改）功能与diff(比较差异)差不多

revert：（还原）：还原代码至最近一次版本控制（可以单个还原和批量选择还原）----常用

clean up；（清理）：删除某些文件，如未受版本控制文件、忽略文件

add：（添加）：可以把未受版本控制文件加入本地仓库
```

### 创建、修改分支

 Git 的分支**本质是指向快照的指针**。它仅是包含所指对象校验和（长度为 40 的 SHA-1 值字符串）的文件，所以它的创建和销毁都异常高效。分支可以把工作从开发主线上分离开来，以保证开发主线的稳定性。

任何参与开发的人，只要不是一次性修改，都应该开一个单独分支，把自己的工作先合入这个分支，等开发完全完成后再合并自己的分支到主版本。

添加环境变量后，用powershell直接可以以命令行形式创建分支。
